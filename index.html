<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã¿ã‚“ãªã®æ—¥ä¸­äº¤æµä¼š</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="weather-bar">
            <div class="datetime-section" id="datetime-section">
                <span class="datetime-loading">...</span>
            </div>
            <div class="weather-section" id="weather-section">
                <select id="location-select" class="location-select">
                    <optgroup label="é–¢æ±">
                        <option value="nishi-ikebukuro" selected>è¥¿æ± è¢‹å…¬åœ’</option>
                        <option value="tokyo">æ±äº¬</option>
                        <option value="yokohama">æ¨ªæµœ</option>
                        <option value="saitama">ã•ã„ãŸã¾</option>
                        <option value="chiba">åƒè‘‰</option>
                    </optgroup>
                    <optgroup label="åŒ—æµ·é“ãƒ»æ±åŒ—">
                        <option value="sapporo">æœ­å¹Œ</option>
                        <option value="sendai">ä»™å°</option>
                    </optgroup>
                    <optgroup label="ä¸­éƒ¨">
                        <option value="nagoya">åå¤å±‹</option>
                        <option value="niigata">æ–°æ½Ÿ</option>
                        <option value="kanazawa">é‡‘æ²¢</option>
                    </optgroup>
                    <optgroup label="é–¢è¥¿">
                        <option value="osaka">å¤§é˜ª</option>
                        <option value="kyoto">äº¬éƒ½</option>
                        <option value="kobe">ç¥æˆ¸</option>
                    </optgroup>
                    <optgroup label="ä¸­å›½ãƒ»å››å›½">
                        <option value="hiroshima">åºƒå³¶</option>
                        <option value="takamatsu">é«˜æ¾</option>
                    </optgroup>
                    <optgroup label="ä¹å·ãƒ»æ²–ç¸„">
                        <option value="fukuoka">ç¦å²¡</option>
                        <option value="naha">é‚£è¦‡</option>
                    </optgroup>
                </select>
                <div class="weather-info" id="weather-info">
                    <span class="weather-loading">å¤©æ°—æƒ…å ±ã‚’å–å¾—ä¸­...</span>
                </div>
            </div>
        </div>
        <header>
            <h1>ã¿ã‚“ãªã®æ—¥ä¸­äº¤æµä¼š</h1>
            <span class="sakura sakura1">ğŸŒ¸</span>
            <span class="sakura sakura2">ğŸŒ¸</span>
            <span class="sakura sakura3">ğŸŒ¸</span>
            <span class="sakura sakura4">ğŸŒ¸</span>
            <span class="sakura sakura5">ğŸŒ¸</span>
        </header>

        <main>
            <section class="event-info">
                <h2>ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ±</h2>
                <div class="info-card">
                    <div class="info-item">
                        <span class="label">ä¸»å‚¬å ´æ‰€ï¼š</span>
                        <span class="value">è¥¿æ± è¢‹å…¬åœ’ï¼ˆæ±äº¬éƒ½è±Šå³¶åŒºè¥¿æ± è¢‹3-20-1ï¼‰<br>
                        â€»æ± è¢‹è¥¿å£å…¬åœ’ã§ã¯ã‚ã‚Šã¾ã›ã‚“(<span class="red-x">âœ–</span>)</span>
                    </div>
                    <div class="info-item">
                        <span class="label">ä¸»å‚¬æ™‚é–“ï¼š</span>
                        <span class="value">åœŸæ›œæ—¥ åˆå¾Œ2æ™‚ã€œ5æ™‚</span>
                    </div>
                    <div class="info-item">
                        <span class="label">ã‚¢ã‚¯ã‚»ã‚¹ï¼š</span>
                        <span class="value">æ± è¢‹é§…è¥¿å£ï¼ˆC2/C3å‡ºå£ï¼‰ã‚ˆã‚Šå¾’æ­©ç´„7åˆ†</span>
                    </div>
                    <div class="info-item">
                        <span class="label">åœ°å›³ï¼š</span>
                        <span class="value"><a href="https://maps.app.goo.gl/dvnUcDbs3QBi44Vp9" target="_blank" style="color: #e74c3c; text-decoration: underline;">Google Mapsã§è¦‹ã‚‹</a></span>
                    </div>
                </div>
            </section>

            <section class="how-to-join">
                <h2>å‚åŠ æ–¹æ³•</h2>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <h3>ç›´æ¥ãŠè¶Šã—ãã ã•ã„</h3>
                        <p>äºˆç´„ä¸è¦ã§ã™ã€‚é–‹å‚¬æ™‚é–“å†…ã«è¥¿æ± è¢‹å…¬åœ’ã¸ãŠè¶Šã—ãã ã•ã„ã€‚</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <h3>ã‚¹ã‚¿ãƒƒãƒ•ã«å£°ã‚’ã‹ã‘ã‚‹</h3>
                        <p>å…¬åœ’å†…ã§ã‚¹ã‚¿ãƒƒãƒ•ã‚’è¦‹ã¤ã‘ã¦ã€ãŠæ°—è»½ã«å£°ã‚’ã‹ã‘ã¦ãã ã•ã„ã€‚</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <h3>è‡ªç”±ã«äº¤æµ</h3>
                        <p>å‚åŠ è€…åŒå£«ã§è‡ªç”±ã«ä¼šè©±ã‚’æ¥½ã—ã‚“ã§ãã ã•ã„ã€‚</p>
                    </div>
                </div>
                <div class="participation-note">
                    <p><strong>å‚åŠ è²»ï¼š</strong>ç„¡æ–™</p>
                    <p><strong>æŒã¡ç‰©ï¼š</strong>ç‰¹ã«ã‚ã‚Šã¾ã›ã‚“ã€‚ãƒ¡ãƒ¢ç”¨ç´™ã‚’ã”ç”¨æ„ã„ãŸã ãã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</p>
                </div>
            </section>

            <section class="ideal-for">
                <h2>ã“ã‚“ãªæ–¹ã«ãŠã™ã™ã‚</h2>
                <div class="ideal-grid">
                    <div class="ideal-card">
                        <div class="icon">ğŸ—£ï¸</div>
                        <h3>èªå­¦ã‚’å­¦ã³ãŸã„æ–¹</h3>
                        <p>æ—¥æœ¬èªã‚„ä¸­å›½èªã‚’å®Ÿè·µçš„ã«å­¦ã³ãŸã„æ–¹</p>
                    </div>
                    <div class="ideal-card">
                        <div class="icon">ğŸ‘¥</div>
                        <h3>å‹é”ã‚’ä½œã‚ŠãŸã„æ–¹</h3>
                        <p>æ—¥ä¸­ã®å‹äººã‚’ä½œã‚ŠãŸã„æ–¹</p>
                    </div>
                    <div class="ideal-card">
                        <div class="icon">ğŸŒ</div>
                        <h3 style="white-space: nowrap;">æ–‡åŒ–äº¤æµã«èˆˆå‘³ãŒã‚ã‚‹æ–¹</h3>
                        <p>ç•°æ–‡åŒ–ã‚’ä½“é¨“ã—ãŸã„æ–¹</p>
                    </div>
                    <div class="ideal-card">
                        <div class="icon">ğŸ“</div>
                        <h3>ç•™å­¦ç”Ÿã®æ–¹</h3>
                        <p>æ—¥æœ¬ã§ç”Ÿæ´»ã™ã‚‹ä¸­å›½äººç•™å­¦ç”Ÿã‚„æ—¥æœ¬äººå­¦ç”Ÿ</p>
                    </div>
                    <div class="ideal-card">
                        <div class="icon">ğŸ’¼</div>
                        <h3>ãƒ“ã‚¸ãƒã‚¹é–¢ä¿‚è€…</h3>
                        <p>æ—¥ä¸­ãƒ“ã‚¸ãƒã‚¹ã«é–¢ã‚ã‚‹æ–¹</p>
                    </div>
                    <div class="ideal-card">
                        <div class="icon">ğŸ˜Š</div>
                        <h3>åˆå¿ƒè€…ã®æ–¹ã‚‚æ­“è¿</h3>
                        <p>è¨€è‘‰ã«è‡ªä¿¡ãŒãªãã¦ã‚‚å¤§ä¸ˆå¤«ã§ã™</p>
                    </div>
                </div>
            </section>

            <section class="links">
                <h2>é–¢é€£ãƒªãƒ³ã‚¯</h2>
                <div class="link-grid">
                    <div class="link-card">
                        <h3>æ—¥æ›œæ—¥æ¼¢èªè§’</h3>
                        <p>æ¯é€±æ—¥æ›œæ—¥ã®ä¸­å›½èªäº¤æµä¼š</p>
                        <a href="http://hyj.duan.jp/" target="_blank" class="btn">è©³ã—ãè¦‹ã‚‹</a>
                    </div>

                    <div class="link-card">
                        <h3>ä¸­å›½å¤§ä½¿é¤¨</h3>
                        <p>åœ¨æ—¥ä¸­å›½å¤§ä½¿é¤¨å…¬å¼ã‚µã‚¤ãƒˆ</p>
                        <a href="https://jp.china-embassy.gov.cn/jpn/" target="_blank" class="btn">ã‚µã‚¤ãƒˆã¸</a>
                    </div>

                    <div class="link-card">
                        <h3>æ¡ç”¨æƒ…å ±</h3>
                        <p style="white-space: nowrap;">é«˜åº¦äººæåŠ ç‚¹å¯¾å¿œä¼æ¥­ç‰¹é›†ã‚ã‚Š</p>
                        <a href="https://seekjob.jp" target="_blank" class="btn">æ±‚äººã‚’è¦‹ã‚‹</a>
                    </div>

                    <div class="link-card">
                        <h3>åœ¨ç•™æ‰‹ç¶š</h3>
                        <p>å‡ºå…¥å›½åœ¨ç•™ç®¡ç†åºã®æ‰‹ç¶šæ¡ˆå†…</p>
                        <a href="https://www.moj.go.jp/isa/applications/index.html" target="_blank" class="btn">è©³ã—ãè¦‹ã‚‹</a>
                    </div>
                </div>
            </section>

            <section class="about">
                <h2>äº¤æµä¼šã«ã¤ã„ã¦</h2>
                <p>
                    ã¿ã‚“ãªã®æ—¥ä¸­äº¤æµä¼šã¯ã€æ—¥æœ¬äººã¨ä¸­å›½äººãŒæ°—è»½ã«äº¤æµã§ãã‚‹å ´æ‰€ã‚’æä¾›ã—ã¦ã„ã¾ã™ã€‚
                    è¥¿æ± è¢‹å…¬åœ’ã§æ¯é€±åœŸæ›œæ—¥ã«é–‹å‚¬ã—ã¦ãŠã‚Šã€ã©ãªãŸã§ã‚‚å‚åŠ ã§ãã¾ã™ã€‚
                </p>
            </section>
        </main>

        <footer>
            <p>&copy; 2024 ã¿ã‚“ãªã®æ—¥ä¸­äº¤æµä¼š</p>
        </footer>
    </div>

    <script>
        // æ›œæ—¥ã®é…åˆ—
        const weekdays = ['æ—¥', 'æœˆ', 'ç«', 'æ°´', 'æœ¨', 'é‡‘', 'åœŸ'];

        // åœ°åŸŸãƒ‡ãƒ¼ã‚¿ï¼ˆåº§æ¨™ã¨è¡¨ç¤ºåï¼‰
        const locations = {
            'nishi-ikebukuro': { name: 'è¥¿æ± è¢‹å…¬åœ’', lat: 35.7295, lon: 139.7109 },
            'tokyo': { name: 'æ±äº¬', lat: 35.6762, lon: 139.6503 },
            'yokohama': { name: 'æ¨ªæµœ', lat: 35.4437, lon: 139.6380 },
            'saitama': { name: 'ã•ã„ãŸã¾', lat: 35.8617, lon: 139.6455 },
            'chiba': { name: 'åƒè‘‰', lat: 35.6073, lon: 140.1063 },
            'sapporo': { name: 'æœ­å¹Œ', lat: 43.0618, lon: 141.3545 },
            'sendai': { name: 'ä»™å°', lat: 38.2682, lon: 140.8694 },
            'nagoya': { name: 'åå¤å±‹', lat: 35.1815, lon: 136.9066 },
            'niigata': { name: 'æ–°æ½Ÿ', lat: 37.9026, lon: 139.0236 },
            'kanazawa': { name: 'é‡‘æ²¢', lat: 36.5944, lon: 136.6256 },
            'osaka': { name: 'å¤§é˜ª', lat: 34.6937, lon: 135.5023 },
            'kyoto': { name: 'äº¬éƒ½', lat: 35.0116, lon: 135.7681 },
            'kobe': { name: 'ç¥æˆ¸', lat: 34.6901, lon: 135.1956 },
            'hiroshima': { name: 'åºƒå³¶', lat: 34.3853, lon: 132.4553 },
            'takamatsu': { name: 'é«˜æ¾', lat: 34.3401, lon: 134.0434 },
            'fukuoka': { name: 'ç¦å²¡', lat: 33.5904, lon: 130.4017 },
            'naha': { name: 'é‚£è¦‡', lat: 26.2124, lon: 127.6809 }
        };

        // ç¾åœ¨é¸æŠä¸­ã®åœ°åŸŸ
        let currentLocation = 'nishi-ikebukuro';

        // æ—¥æ™‚ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°
        function updateDateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            const weekday = weekdays[now.getDay()];
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');

            const datetimeSection = document.getElementById('datetime-section');
            datetimeSection.innerHTML = `
                <span class="datetime-date">${year}å¹´${month}æœˆ${day}æ—¥</span>
                <span class="datetime-weekday">(${weekday})</span>
                <span class="datetime-time">${hours}:${minutes}:${seconds}</span>
            `;
        }

        // å¤©æ°—ã‚³ãƒ¼ãƒ‰ã‹ã‚‰å¤©æ°—ã‚¢ã‚¤ã‚³ãƒ³ã¨èª¬æ˜ã‚’å–å¾—
        function getWeatherInfo(code) {
            const weatherCodes = {
                0: { icon: 'â˜€ï¸', desc: 'å¿«æ™´' },
                1: { icon: 'ğŸŒ¤ï¸', desc: 'æ™´ã‚Œ' },
                2: { icon: 'â›…', desc: 'ãã‚‚ã‚Šæ™‚ã€…æ™´ã‚Œ' },
                3: { icon: 'â˜ï¸', desc: 'ãã‚‚ã‚Š' },
                45: { icon: 'ğŸŒ«ï¸', desc: 'éœ§' },
                48: { icon: 'ğŸŒ«ï¸', desc: 'éœ§æ°·' },
                51: { icon: 'ğŸŒ§ï¸', desc: 'å°é›¨' },
                53: { icon: 'ğŸŒ§ï¸', desc: 'é›¨' },
                55: { icon: 'ğŸŒ§ï¸', desc: 'å¼·ã„é›¨' },
                56: { icon: 'ğŸŒ§ï¸', desc: 'å‡ã‚‹éœ§é›¨' },
                57: { icon: 'ğŸŒ§ï¸', desc: 'å‡ã‚‹éœ§é›¨' },
                61: { icon: 'ğŸŒ§ï¸', desc: 'å°é›¨' },
                63: { icon: 'ğŸŒ§ï¸', desc: 'é›¨' },
                65: { icon: 'ğŸŒ§ï¸', desc: 'å¤§é›¨' },
                66: { icon: 'ğŸŒ§ï¸', desc: 'å‡ã‚‹é›¨' },
                67: { icon: 'ğŸŒ§ï¸', desc: 'å‡ã‚‹å¤§é›¨' },
                71: { icon: 'ğŸŒ¨ï¸', desc: 'å°é›ª' },
                73: { icon: 'ğŸŒ¨ï¸', desc: 'é›ª' },
                75: { icon: 'ğŸŒ¨ï¸', desc: 'å¤§é›ª' },
                77: { icon: 'ğŸŒ¨ï¸', desc: 'éœ§é›ª' },
                80: { icon: 'ğŸŒ¦ï¸', desc: 'ã«ã‚ã‹é›¨' },
                81: { icon: 'ğŸŒ¦ï¸', desc: 'ã«ã‚ã‹é›¨' },
                82: { icon: 'â›ˆï¸', desc: 'æ¿€ã—ã„ã«ã‚ã‹é›¨' },
                85: { icon: 'ğŸŒ¨ï¸', desc: 'ã«ã‚ã‹é›ª' },
                86: { icon: 'ğŸŒ¨ï¸', desc: 'æ¿€ã—ã„ã«ã‚ã‹é›ª' },
                95: { icon: 'â›ˆï¸', desc: 'é›·é›¨' },
                96: { icon: 'â›ˆï¸', desc: 'é›·é›¨ï¼ˆé›¹ï¼‰' },
                99: { icon: 'â›ˆï¸', desc: 'æ¿€ã—ã„é›·é›¨ï¼ˆé›¹ï¼‰' }
            };
            return weatherCodes[code] || { icon: 'ğŸŒ¡ï¸', desc: 'ä¸æ˜' };
        }

        // å¤©æ°—ã‚’å–å¾—
        async function fetchWeather() {
            const location = locations[currentLocation];
            const url = `https://api.open-meteo.com/v1/forecast?latitude=${location.lat}&longitude=${location.lon}&current=temperature_2m,weather_code,relative_humidity_2m&timezone=Asia/Tokyo`;

            try {
                const response = await fetch(url);
                const data = await response.json();
                const current = data.current;
                const weatherInfo = getWeatherInfo(current.weather_code);

                const weatherInfoEl = document.getElementById('weather-info');
                weatherInfoEl.innerHTML = `
                    <span class="weather-icon">${weatherInfo.icon}</span>
                    <span class="weather-temp">${Math.round(current.temperature_2m)}Â°C</span>
                    <span class="weather-desc">${weatherInfo.desc}</span>
                    <span class="weather-humidity">ğŸ’§${current.relative_humidity_2m}%</span>
                `;
            } catch (error) {
                const weatherInfoEl = document.getElementById('weather-info');
                weatherInfoEl.innerHTML = '<span class="weather-error">å–å¾—ã‚¨ãƒ©ãƒ¼</span>';
            }
        }

        // åœ°åŸŸå¤‰æ›´æ™‚ã®å‡¦ç†
        function onLocationChange() {
            const select = document.getElementById('location-select');
            currentLocation = select.value;
            // é¸æŠã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
            localStorage.setItem('weatherLocation', currentLocation);
            fetchWeather();
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰ä¿å­˜ã•ã‚ŒãŸåœ°åŸŸã‚’å¾©å…ƒ
            const savedLocation = localStorage.getItem('weatherLocation');
            if (savedLocation && locations[savedLocation]) {
                currentLocation = savedLocation;
                document.getElementById('location-select').value = savedLocation;
            }

            // åœ°åŸŸé¸æŠã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            document.getElementById('location-select').addEventListener('change', onLocationChange);

            updateDateTime();
            fetchWeather();
            // æ—¥æ™‚ã¯æ¯ç§’æ›´æ–°
            setInterval(updateDateTime, 1000);
            // å¤©æ°—ã¯10åˆ†ã”ã¨ã«æ›´æ–°
            setInterval(fetchWeather, 600000);
        });
    </script>
</body>
</html>
